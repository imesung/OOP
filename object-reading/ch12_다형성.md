## 다형성

다형성을 살펴보기 전에 이와 연결되어있는 상속을 다시 한번 살펴보자. 11장에서는 코드 재사용 측면에서 상속 보다는 합성을 이용하는 것이 훨씬 좋다고 하였는데, 사실 **상속의 목적은 코드 재사용이 아니다.** 상속은 타입 계층을 구조화하기 위해 사용해야한다. 추 후 살펴보겠지만 타입 계층은 객체지향 프로그래밍의 중요한 특성 중 하나인 다형성의 기반을 제공한다.

상속을 이용해 자식 클래스를 추가하려 한다면 스스로에게 다음과 같은 질문을 해보기 바란다. 

- 상속을 사용하려는 목적이 단순히 코드를 재사용하기 위해서인가?
  - 이 목적이라면 상속을 사용해서는 안 된다. 합성을 사용하라
- 클라이언트 관점에서 인스턴스들을 동일하게 행동하는 그룹으로 묶기 위해서인가?

객체지향 패러다임이 주목받기 시작하던 초기에 상속은 타입 계층과 다형성을 구현할 수 있는 거의 유일한 방법이었다. 여기에 더해 상속을 사용하면 코드를 쉽게 재사용할 수 있다는 과대광고가 널리 퍼지면서 상속에 대한 맹신과 추종이 자라났다. 많은 시간이 흐른 지금도 여전히 상속은 다형성을 구현할 수 있는 가장 일반적인 방법이다. 하지만 최근의 언어들을 상속 이외에도 다형성을 구현할 수 있는 다양한 방법들을 제공하기 있기 때문에 과거에 비해 상속의 중요성이 많이 낮아졌다고 할 수 있다.

이제 이번 장에서는 상속의 관점에서 다형성이 구현되는 기술적인 메커니즘을 살펴보기로 한다. 이번 장을 읽고나면 다형성은 런타임 시점에 메시지 처리하기 적합한 메소드를 동적으로 탐색하는 과정 속에서 구현되며 상속이 이런 메소드를 찾기 위한 일종의 탐색 경로를 클래스 계층의 형태로 구현하기 위한 방법이라는 사실을 이해하게 될 것이다.

---

### 01. 다형성

다형성이라는 단어는 '많은 형태를 가질 수 있는 능력'이라는 의미를 가지고 있다. 다형성을 하나의 추상 인터페이스에 대해 코드를 작성하고 이 추상 인터페이스에 대해 서로 다른 구현을 연결할 수 있는 능력으로 정의할 수도 있다. 간단히 말해 다형성은 여러 타입을 대상으로 동작할 수 있는 코드를 작성할 수 있는 방법이라고 할 수 있다.

객체지향 프로그래밍에서 사용되는 다형성은 아래 그림과 같이 **유니버설 다형성과 임시 다형성**으로 분류할 수 있다. **유니버셜 다형성은  다시 매개변수 다형성과 포함 다형성** 으로 분류할 수 있고, **임시 다형성은 오버로딩 다형성과 강제 다형성으**로 분류할 수 있다.

<img src="https://user-images.githubusercontent.com/40616436/84498972-9927c080-acec-11ea-9042-f0e748f6e2cb.png" alt="image" style="zoom:50%;" />

일반적으로 하나의 클래스 안에 동일한 이름의 메소드가 존재하는 경우를 가리켜 오버로딩 다형성이라고 부른다. 

> 오버로딩 다형성
>
> - 유사한 작업을 수행하는 메소드의 이름을 통일할 수 있어 기억해야하는 이름의 수를 줄일 수 있다.

강제 다형성은 언어가 지원하는 자동적인 타입 변화나 사용자가 직접 구현한 타입 변환을 이용해 동일한 연산자를 다양한 타입에 사용할 수 있는 방식을 가리킨다. 예를 들어 자바에서는 이항 연산자인 '+'는 피연산자가 모두 정수일 경우에는 정수에 대한 덧셈 연산자로 동작하지만 하나는 정슈형이고 다른 하나는 문자열인 경우에는 연결 연산자로 동작한다. 이때 정수형 피연산자는 문자열 타입으로 강제 형변환 된다.

> 강제 다형성
>
> - 일반적으로 오버로딩 다형성과 강제 다형성을 함께 사용하면 모호해질 수 있는데 실제로 어떤 메소드가 호출될지를 판단하기가 어려워지기 때문이다.

매개변수 다형성은 **제네릭 프로그래밍**과 관련이 높은데, 클래스의 인스턴스 변수나 메소드의 매개변수 타입을 임의의 타입으로 선언한 후 사용자는 시점에 구체적인 타입으로 지정하는 방식을 가리킨다. 예를 들어, 자바의 List 인터페이스는 컬렉션에 보관할 요소의 타입을 임의의 타입 T로 지정하고 있으며 실제 인스턴스를 생성하는 시점에 T를 구체적인 타입으로 지정할 수 있게 하고 있다. 따라서 List 인터페이스는 다양한 타입의 요소를 다루기 위해 동일한 오퍼레이션을 사용할 수 있다.